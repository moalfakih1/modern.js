(self.webpackChunk_modern_js_main_doc=self.webpackChunk_modern_js_main_doc||[]).push([["docs_en_guides_topic-detail_changesets_release-pre_mdx"],{30007:function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});!function(e,n){for(var r in n)Object.defineProperty(e,r,{enumerable:!0,get:n[r]})}(n,{frontmatter:function(){return a},title:function(){return t},toc:function(){return h},default:function(){return d}});var s=r("9880"),i=r("23169"),a={sidebar_position:4},t="Publishing a pre-release version",h=[{text:"Steps",depth:2,id:"steps"},{text:"Run the following command to upgrade the version number of the pre-release version:",depth:4,id:"run-the-following-command-to-upgrade-the-version-number-of-the-pre-release-version:"},{text:"Check the changes and submit",depth:4,id:"check-the-changes-and-submit"},{text:"Run the following command to publish the pre-release version:",depth:4,id:"run-the-following-command-to-publish-the-pre-release-version:"},{text:"Notes",depth:2,id:"notes"},{text:"Exiting pre-release mode",depth:3,id:"exiting-pre-release-mode"}];function o(e){var n=Object.assign({h1:"h1",a:"a",p:"p",h2:"h2",div:"div",h4:"h4",pre:"pre",code:"code",ul:"ul",li:"li",h3:"h3"},(0,i.useMDXComponents)(),e.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.h1,{id:"publishing-a-pre-release-version",children:["Publishing a pre-release version",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#publishing-a-pre-release-version",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"Before doing an actual release, we also need to publish a pre-release version for internal testing and user use. Changesets also support publishing pre-release versions."}),"\n",(0,s.jsxs)(n.h2,{id:"steps",children:["Steps",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#steps",children:"#"})]}),"\n",(0,s.jsxs)(n.div,{className:"modern-directive info",children:[(0,s.jsx)(n.div,{className:"modern-directive-title",children:"INFO"}),(0,s.jsx)(n.div,{className:"modern-directive-content",children:(0,s.jsx)(n.p,{children:"The following example commands are all using pnpm as the package management tool. If you need to use other package management tools, please replace them as needed."})})]}),"\n",(0,s.jsxs)(n.h4,{id:"run-the-following-command-to-upgrade-the-version-number-of-the-pre-release-version:",children:["Run the following command to upgrade the version number of the pre-release version:",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#run-the-following-command-to-upgrade-the-version-number-of-the-pre-release-version:",children:"#"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"pnpm run bump --canary --preid <preid>\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"preid"})," is the tag for the pre-release version, such as ",(0,s.jsx)(n.code,{children:"alpha"}),", ",(0,s.jsx)(n.code,{children:"beta"}),", etc., and the default value is ",(0,s.jsx)(n.code,{children:"next"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["After using the ",(0,s.jsx)(n.code,{children:"--canary"})," parameter, the ",(0,s.jsx)(n.code,{children:"bump"})," command completes the following three steps:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"changeset pre enter <preid>"}),": Enters pre-release mode."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"changeset version"}),": Upgrades the version number."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"changeset pre exit"}),": Exits pre-release mode."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.h4,{id:"check-the-changes-and-submit",children:["Check the changes and submit",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#check-the-changes-and-submit",children:"#"})]}),"\n",(0,s.jsx)(n.p,{children:"Check whether the version number changes are correct and submit the changes."}),"\n",(0,s.jsx)(n.p,{children:"It is recommended to perform pre-release operations not on the main branch and not merge them into the main branch. After the pre-release verification is completed, an actual version can be directly released based on the main branch."}),"\n",(0,s.jsxs)(n.h4,{id:"run-the-following-command-to-publish-the-pre-release-version:",children:["Run the following command to publish the pre-release version:",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#run-the-following-command-to-publish-the-pre-release-version:",children:"#"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"pnpm run release --tag <tag>\n"})}),"\n",(0,s.jsxs)(n.p,{children:["When publishing a pre-release version, you must use the ",(0,s.jsx)(n.code,{children:"--tag"})," parameter. The parameter value is best the same as the ",(0,s.jsx)(n.code,{children:"preid"})," value to facilitate user use."]}),"\n",(0,s.jsxs)(n.h2,{id:"notes",children:["Notes",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#notes",children:"#"})]}),"\n",(0,s.jsxs)(n.h3,{id:"exiting-pre-release-mode",children:["Exiting pre-release mode",(0,s.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#exiting-pre-release-mode",children:"#"})]}),"\n",(0,s.jsxs)(n.p,{children:["After entering pre-release mode, changesets will automatically create a ",(0,s.jsx)(n.code,{children:"pre.json"})," file in the ",(0,s.jsx)(n.code,{children:".changeset"})," directory to record some status information when entering pre-release mode. When the status information is inconsistent with the current repository status, you can directly delete this file to exit pre-release mode."]})]})}var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({},(0,i.useMDXComponents)(),e.components).wrapper;return n?(0,s.jsx)(n,Object.assign({},e,{children:(0,s.jsx)(o,e)})):o(e)}}}]);